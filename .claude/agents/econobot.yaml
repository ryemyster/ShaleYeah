name: econobot
description: "NPV/DCF calculations and transparent economic modeling specialist"
version: "1.0.0"

inputs:
  required:
    - drill_forecast: "Production forecast from drillcast agent"
    - ownership_data: "NRI/WI data from titletracker agent"
    - pricing_deck: "Commodity pricing assumptions"
  optional:
    - loe_assumptions: "Lease operating expense parameters"
    - capex_estimates: "Capital expenditure assumptions"
    - tax_parameters: "Tax rates and depletion assumptions"

outputs:
  - name: valuation.json
    description: "NPV, IRR, and cash flow analysis"
    path: "${OUT_DIR}/valuation.json"
  - name: econ_summary.csv
    description: "Monthly cash flow projections"
    path: "${OUT_DIR}/econ_summary.csv"
  - name: npv_breakdown.md
    description: "Economic analysis with transparent methodology"
    path: "${OUT_DIR}/npv_breakdown.md"

tools:
  - dcf_calculator
  - risk_analyzer
  - sensitivity_modeler

workflow:
  steps:
    - name: "data_validation"
      description: "Validate input data completeness and consistency"
      action: "validate_economic_inputs"
    - name: "cash_flow_modeling"
      description: "Build monthly cash flow projections"
      action: "model_cash_flows"
    - name: "npv_calculation"
      description: "Calculate NPV using discounted cash flow method"
      action: "calculate_npv"
    - name: "sensitivity_analysis"
      description: "Analyze sensitivity to key variables"
      action: "perform_sensitivity_analysis"
    - name: "risk_adjustment"
      description: "Apply risk-adjusted discount rates"
      action: "adjust_for_risk"

quality_gates:
  - check: "Valuation must include NPV, IRR, and payback calculations"
    validation: "grep -q 'npv\\|irr\\|payback' ${OUT_DIR}/valuation.json"
  - check: "Economic summary must include monthly cash flows"
    validation: "grep -q 'revenue\\|opex\\|cashflow' ${OUT_DIR}/econ_summary.csv"
  - check: "NPV breakdown must show transparent methodology"
    validation: "grep -q 'methodology\\|assumptions\\|calculation' ${OUT_DIR}/npv_breakdown.md"

economic_model:
  core_calculation: |
    Revenue = Monthly_Prod * Strip_Price * NRI
    OpCost = Monthly_Prod * LOE
    CashFlow = Revenue - OpCost  
    NPV = sum(CashFlow_t / (1 + r)^t) - CapEx
  
  default_assumptions:
    discount_rate: 0.10  # 10% base rate
    oil_price: 75.00  # $/bbl
    gas_price: 3.50   # $/mcf
    ngl_price: 25.00  # $/bbl
    loe: 8.50         # $/boe
    
  sensitivity_variables:
    - oil_price: [-20%, -10%, 0%, +10%, +20%]
    - gas_price: [-20%, -10%, 0%, +10%, +20%]
    - production: [-30%, -15%, 0%, +15%, +30%]
    - costs: [-15%, 0%, +15%, +30%]

risk_adjustments:
  geological_risk:
    low: 0.08     # 8% discount rate
    medium: 0.10  # 10% discount rate  
    high: 0.15    # 15% discount rate
  
  operational_risk:
    proven_area: 0.00    # no adjustment
    development: 0.02    # +2% discount rate
    exploration: 0.05    # +5% discount rate

output_metrics:
  profitability:
    - npv_10: "Net Present Value at 10% discount"
    - irr: "Internal Rate of Return"
    - roi: "Return on Investment"
    - payback_months: "Payback period in months"
  
  cash_flow:
    - monthly_net_revenue: "Monthly revenue after royalties"
    - cumulative_cashflow: "Cumulative free cash flow"
    - breakeven_month: "Month of positive cumulative cash flow"
  
  risk_metrics:
    - npv_p90: "90th percentile NPV (conservative)"
    - npv_p50: "50th percentile NPV (most likely)"
    - npv_p10: "10th percentile NPV (optimistic)"

investment_thresholds:
  minimum_npv: 300000      # $300K minimum NPV
  minimum_irr: 0.25        # 25% minimum IRR
  maximum_payback: 14      # 14 months maximum payback
  minimum_roi: 3.0         # 3x minimum ROI

error_handling:
  on_failure:
    - log_error: true
    - save_partial_economics: true
    - continue_pipeline: true
  timeout: 180
  max_retries: 2

success_criteria:
  - "Provides transparent NPV/DCF calculations with clear methodology"
  - "Generates realistic cash flow projections with sensitivity analysis"
  - "Supports investment decision-making with risk-adjusted metrics"
  - "Enables comparison across multiple investment opportunities"
  - "Maintains investor-grade accuracy and auditability"

next_agents:
  on_success: ["riskranger"]
  on_failure: ["reporter"]

environment:
  RUN_ID: "${RUN_ID}"
  OUT_DIR: "${OUT_DIR}"

cli:
  entrypoint: "python agents/econobot_agent.py"
  args:
    - "--forecast=${input.drill_forecast}"
    - "--ownership=${input.ownership_data}"
    - "--pricing=${input.pricing_deck}"
    - "--output-dir=${OUT_DIR}"
    - "--run-id=${RUN_ID}"

metadata:
  author: "SHALE YEAH Platform"
  license: "Apache-2.0"
  created: "2024-08-18"
  priority: 5
  category: "economic_modeling"